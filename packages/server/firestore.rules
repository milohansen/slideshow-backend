rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow backend service account full access
    // This assumes your backend uses service account authentication
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // Alternative: If you want to be more restrictive, you can specify
    // individual collections and operations:
    /*
    match /blobs/{blobId} {
      allow read, write: if request.auth != null;
    }
    
    match /sources/{sourceId} {
      allow read, write: if request.auth != null;
    }
    
    match /device_variants/{variantId} {
      allow read, write: if request.auth != null;
    }
    
    match /devices/{deviceId} {
      allow read, write: if request.auth != null;
    }
    
    match /device_queue_state/{deviceId} {
      allow read, write: if request.auth != null;
    }
    
    match /auth_sessions/{sessionId} {
      allow read, write: if request.auth != null;
    }
    
    match /picker_sessions/{sessionId} {
      allow read, write: if request.auth != null;
    }
    
    match /failed_tasks/{taskId} {
      allow read, write: if request.auth != null;
    }
    */
  }
}